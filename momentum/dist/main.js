(()=>{"use strict";const e=[{title:"Aqua Caelestis",src:"./assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{title:"River Flows In You",src:"./assets/sounds/River Flows In You.mp3",duration:"03:50"},{title:"Summer Wind",src:"./assets/sounds/Summer Wind.mp3",duration:"03:50"},{title:"Ennio Morricone",src:"./assets/sounds/Ennio Morricone.mp3",duration:"03:50"}];function t(){const e=(new Date).getHours();return 24===e||e<6?"night":e<12?"morning":e<18?"afternoon":e<24?"evening":void 0}!function e(){const n=document.querySelector(".time"),o=(new Date).toLocaleTimeString();n.textContent=o,function(){const e=document.querySelector(".date"),t=(new Date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});e.textContent=t}(),setTimeout(e,1e3),function(){const e=document.querySelector(".greeting"),n=`Good ${t()}, `;e.textContent=n}()}();const n=document.querySelector(".name");let o;function c(e,t){return Math.floor(Math.random()*(t-e+1))+e}function r(){const e=t(),n=o<10?`0${o}`:o,c=new Image,r=`https://raw.githubusercontent.com/Anasstassia/stage1-tasks/assets/images/${e}/${n}.jpg`;c.src=r,c.onload=()=>{document.body.style.backgroundImage=`url(${r})`}}window.addEventListener("beforeunload",(function(){localStorage.setItem("name",n.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(n.value=localStorage.getItem("name"))})),o=c(1,20),r();const a=document.querySelector(".slide-next"),s=document.querySelector(".slide-prev");a.addEventListener("click",(function(){20==+o&&(o=0),o++,r()})),s.addEventListener("click",(function(){1==+o&&(o=21),o--,r()}));const u=document.querySelector(".weather-icon"),i=document.querySelector(".temperature"),d=document.querySelector(".wind"),l=document.querySelector(".humidity"),m=document.querySelector(".weather-description"),y=document.querySelector(".city"),S=document.querySelector(".weather-error");async function p(e){y.value=e;const t=`https://api.openweathermap.org/data/2.5/weather?q=${e}&lang=en&appid=ba499dceea3b725ead8e60cb81d7ecb1&units=metric`,n=await fetch(t),o=await n.json();200!==o.cod?(S.textContent="Введите верный город",i.textContent="",m.textContent="",d.textContent="",l.textContent="",u.className=""):(S.textContent="",localStorage.setItem("city",e),u.className="weather-icon owf",u.classList.add(`owf-${o.weather[0].id}`),i.textContent=`${Math.round(o.main.temp)}°C`,m.textContent=o.weather[0].description,d.textContent=`Wind speed: ${Math.round(o.wind.speed)} m/s`,l.textContent=`Humidity: ${Math.round(o.main.humidity)} %`)}p(localStorage.getItem("city")||"Minsk"),y.addEventListener("change",(function(e){p(e.target.value)}));const g=document.querySelector(".quote"),q=document.querySelector(".author"),w=document.querySelector(".change-quote");async function v(){const e=c(1,100),t=await fetch("https://gist.githubusercontent.com/nasrulhazim/54b659e43b1035215cd0ba1d4577ee80/raw/e3c6895ce42069f0ee7e991229064f167fe8ccdc/quotes.json"),n=await t.json();g.textContent=n.quotes[e].quote,q.textContent=n.quotes[e].author}v(),w.addEventListener("click",v);const h=document.querySelector(".name-music"),f=document.querySelector(".play"),L=document.querySelector(".play-prev"),C=document.querySelector(".play-next"),x=new Audio;let E=!1,k=0;function b(){x.src=e[k].src,x.currentTime=0,E?(x.pause(),E=!1):($(),x.play(),E=!0),document.querySelectorAll(".play-item").forEach((e=>e.classList.remove("item-active"))),document.querySelectorAll(".play-item")[k].classList.add("item-active"),h.textContent=e[k].title}function $(){E?f.classList.remove("pause"):f.classList.add("pause")}f.addEventListener("click",$),f.addEventListener("click",b),C.addEventListener("click",(()=>{E=!1,3===k?k=0:k++,b()})),L.addEventListener("click",(()=>{E=!1,0===k?k=3:k--,b()}));const I=document.querySelector(".play-list");e.forEach(((t,n)=>{const o=document.createElement("li");o.classList.add("play-item"),o.textContent=`${e[n].title}`,I.append(o)}));const M=document.querySelector(".audio-player");x.addEventListener("loadeddata",(()=>{M.querySelector(".time-music .length").textContent=T(x.duration),x.volume=.75}),!1);const A=M.querySelector(".timeline");function T(e){let t=parseInt(e),n=parseInt(t/60);t-=60*n;const o=parseInt(n/60);return n-=60*o,0===o?`${n}:${String(t%60).padStart(2,0)}`:`${String(o).padStart(2,0)}:${n}:${String(t%60).padStart(2,0)}`}A.addEventListener("click",(e=>{const t=window.getComputedStyle(A).width,n=e.offsetX/parseInt(t)*x.duration;x.currentTime=n}),!1),setInterval((()=>{M.querySelector(".progress").style.width=x.currentTime/x.duration*100+"%",M.querySelector(".time-music .current").textContent=T(x.currentTime)}),500);const j=M.querySelector(".volume-slider");j.addEventListener("click",(e=>{const t=window.getComputedStyle(j).width,n=e.offsetX/parseInt(t);x.volume=n,M.querySelector(".volume-percentage").style.width=100*n+"%"}),!1),M.querySelector(".volume-button").addEventListener("click",(()=>{const e=M.querySelector(".volume-button");x.muted=!x.muted,x.muted?e.classList.add("background-mute"):e.classList.remove("background-mute")}));const D=document.querySelector(".settings"),W=document.querySelector(".settings-menu");D.addEventListener("click",(()=>{W.classList.toggle("none")}))})();